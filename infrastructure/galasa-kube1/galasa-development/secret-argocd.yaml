#
# Copyright contributors to the Galasa project
#
# SPDX-License-Identifier: EPL-2.0
#

apiVersion: external-secrets.io/v1
kind: ExternalSecret
metadata:
  name: argocd-token
  namespace: galasa-development
spec:
  refreshInterval: 24h
  secretStoreRef:
    name: ibmcloud-secrets-manager
    kind: SecretStore
  target:
    name: argocd-token
    template:
      type: Opaque

  data:
  - secretKey: argocd-token
    # Corresponds to the secret: 'kube1-argocd-cli-token' #pragma: allowlist secret 
    remoteRef:
      key: arbitrary/651a7633-512e-3bb7-c926-27e36c4a94f0

# Unsure if this secret is needed in Kubernetes anymore as I don't think any Tekton builds need it... will investigate and clear this up if not.