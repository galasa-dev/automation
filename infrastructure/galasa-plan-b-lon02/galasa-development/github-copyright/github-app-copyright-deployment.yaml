#
# Copyright contributors to the Galasa project
#
# SPDX-License-Identifier: EPL-2.0
#
apiVersion: apps/v1
kind: Deployment
metadata:
  annotations: {}
  name: githubappcopyright
  namespace: galasa-development
spec:
  replicas: 1
  selector:
    matchLabels:
      app: githubappcopyright
  template:
    metadata:
      labels:
        app: githubappcopyright
    spec:
      containers:
        - command:
            - copyright
          image: 'harbor.galasa.dev/galasadev/galasa-copyright:latest'
          imagePullPolicy: Always
          name: copyright
          args: ["/secrets/key.pem"]
          ports:
            - containerPort: 3000
          volumeMounts:
            - mountPath: /secrets
              subPath: key.pem 
              name: key
              readOnly: true
      volumes:
        - name: key
          secret:
            secretName: github-copyright-app-key
            items:
              - key: key.pem
                path: key.pem
            defaultMode: 440