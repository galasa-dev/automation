#
# Copyright contributors to the Galasa project 
#
apiVersion: tekton.dev/v1beta1
kind: Pipeline
metadata:
  name: branch-clone-cli
  namespace: galasa-build
spec:
  params:
  - name: distBranch
    type: string
  - name: fromBranch
    type: string
  - name: overwrite
    type: string
    default: ""
  - name: force
    type: string
    default: ""
#
#
#
  tasks:
#
#
#
  - name: clone-branch-cli
    taskRef: 
      name: galasabld
    params:
    - name: context
      value: $(context.pipelineRun.name)
    - name: command
      value:
        - github
        - branch
        - copy
        - --repository
        - cli
        - --to
        - $(params.distBranch)
        - --branch
        - $(params.fromBranch)
        - $(params.overwrite)
        - $(params.force)
        - --credentials
        - /creds/githubcreds.yaml